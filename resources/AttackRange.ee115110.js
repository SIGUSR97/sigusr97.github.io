import{d as e,r as t,c as a,a as s,o as n,b as r,e as l,w as o,f as i,t as c,g as h,F as d,h as u}from"./index.7040741d.js";class f{constructor(e,t){this.x=e,this.y=t}multScalar(e){return new f(this.x*e,this.y*e)}rotated90(){return new f(this.y,-this.x)}addVector(e){return new f(this.x+e.x,this.y+e.y)}}var m,g,p,v;(g=m||(m={})).COVER="c",g.FILL="f",(v=p||(p={})).ALL="a",v.FRONT="f",v.LEFT="l",v.RIGHT="r",v.BACK="b";const w={t:new f(0,-1),r:new f(1,0),b:new f(0,1),l:new f(-1,0)};function x(e,t){return 0===(e=Math.abs(e))?1:(t===m.COVER&&(e-=1),2*e+1)}var y=e({setup(){var e,s,n;const r=new URLSearchParams(window.location.search);let l=t(null!=(e=r.get("range"))?e:"-3 3-1 1-3&1+1 1+2&1-3 1-2&1+3 1+2&1-3 1-3&1+1 3-1");const o=t("右"),i=a((()=>({"右":"r","左":"l","上":"t","下":"b"}[o.value]))),c=t(!0),h=a((()=>{let e;try{e=function(e,{charDir:t="r",evenOffset:a=-1}){let s=[],n=w[t];const r=e.split(" ").filter((e=>e));let[,l=0,o=p.FRONT]=r[0].match(/([+-]?\d+)?([a-zA-Z])?/);if(o=null==o?void 0:o.toLowerCase(),1===r.length)o=p.FRONT,l=0;else if(o!==p.FRONT)switch(o){case p.RIGHT:n=n.rotated90();case p.BACK:n=n.rotated90();case p.LEFT:n=n.rotated90()}const i=n.rotated90();l=parseInt(l),r.length>1&&r.splice(0,1);for(let d=0;d<r.length;++d){const e=r[d].match(/(.+?)\*(\d+)/);if(!e)continue;const[,t,a]=e;a&&r.splice(d,1,...Array(parseInt(a)).fill(t))}for(const[d,u]of r.entries()){const e=d+l;for(const t of u.split("&")){let r,[,l,c=0]=t.match(/([a-zA-Z0-9]+)([+-][0-9]+)?/);if(c=-parseInt(c),r=Object.values(m).includes(l.toLowerCase())?x(e,l.toLowerCase()):parseInt(l),0===r)continue;const h=-(r-1)/2+c+.5*!(1&r)*a,d=n.multScalar(e),u=o===p.ALL;for(let e=0;e<r;++e)if(u){const t=d.addVector(i.multScalar(e+h));s.push(t);let a=t;for(let e=0;e<3;++e)a=a.rotated90(),s.push(a)}else s.push(d.addVector(i.multScalar(e+h)))}}const c=new Set,h=[];for(const d of s){const e=`${d.x},${d.y}`;c.has(e)||(c.add(e),h.push(d))}return h}(l.value,{charDir:i.value,evenOffset:c.value?1:-1})}catch(t){e=[]}return e.length<1e3?e:[{x:0,y:0}]})),d=t(0),u=()=>{d.value++,requestAnimationFrame(u)};u();const f=t(Object.keys([...Array(10)]).map((e=>.2*+e))),g=t(null!=(s=r.get("chars"))?s:"⬜,🟧,⬆,➡,⬇,⬅");return{docs:"请输入内容",range:h,input:l,dir:i,width:t(1),height:t(1),svgAspectRatio:t([10,10]),svgMode:t("svg"===(null!=(n=r.get("mode"))?n:"svg")),dirChinese:o,maskY:f,characters:g,evenOffset:c,t:d}},data:()=>({svgAspectRatio:[10,10],width:1,height:1,dir:"r",svgMode:!0}),methods:{handleScroll(e){e.preventDefault();const{deltaY:t}=e;this.svgAspectRatio=this.svgAspectRatio.map((e=>function(e,t){const[a,s]=t;return Math.min(s,Math.max(a,e))}(e+function(e,t,a){const[s,n]=t,[r,l]=a;return(e-s)*(l-r)/(n-s)+r}(-t,[-200,200],[-1,1]),[5,50])))},angle:function(e){switch(e){case"r":return 0;case"b":return 90;case"t":return-90;case"l":return 180}}},computed:{svgViewBox(){return[...this.svgAspectRatio.map((e=>-e/2)),...this.svgAspectRatio]},rangeString(){if(!this.range.length)return"";const e=[...this.range],{minX:t,minY:a,maxX:s,maxY:n}=function(e){let t=1/0,a=1/0,s=-1/0,n=-1/0;for(const r of e)r.x<t&&(t=r.x),r.y<a&&(a=r.y),r.x>s&&(s=r.x),r.y>n&&(n=r.y);return{minX:Math.min(0,t),minY:Math.min(0,a),maxX:Math.max(0,s),maxY:Math.max(0,n)}}(e),[r="⬜",l="🟧",o="⬆",i="➡",c="⬇",h="⬅"]=this.characters.split(","),d={t:o,r:i,b:c,l:h},u=[];for(let f=a;f<=n;f++){const e=[];u.push(e);for(let a=t;a<=s;a++)a||f?e.push(r):e.push(d[this.dir])}for(const f of[...this.range]){const e={x:f.x+-t,y:f.y+-a};u[e.y][e.x]=l}u[-a][-t]=d[this.dir];return u.map((e=>e.join(""))).join("\n")}}});const k={class:"container"},V={id:"stripe",maskContentUnits:"objectBoundingBox"},b=l("rect",{fill:"white",x:"0",y:"0",width:"100%",height:"100%"},null,-1),_=l("circle",{cx:".5",cy:".5",r:".45",fill:"none",stroke:"#bfb7ab","stroke-width":".1"},null,-1),A=l("circle",{cx:".5",cy:".5",r:".45",fill:"none",stroke:"#f29019","stroke-width":"0.1","stroke-dashoffset":"66%","stroke-dasharray":"25% 2"},null,-1),M={key:1,class:"text-container",style:{"line-height":"1.1em","white-space":"pre",margin:"20px 0"}};y.render=function(e,t,a,f,m,g){const p=s("el-input"),v=s("el-tooltip"),w=s("el-col"),x=s("el-option"),y=s("el-select"),R=s("el-checkbox"),O=s("el-row");return n(),r("div",k,[l(O,{gutter:20},{default:o((()=>[l(w,{span:6,offset:1},{default:o((()=>[l(v,{effect:"dark",content:e.docs},{default:o((()=>[l(p,{modelValue:e.input,"onUpdate:modelValue":t[1]||(t[1]=t=>e.input=t),placeholder:"请输入内容"},null,8,["modelValue"])])),_:1},8,["content"])])),_:1}),l(w,{span:3,offset:0},{default:o((()=>[l(v,{class:"item",effect:"dark",content:"角色朝向",placement:"top"},{default:o((()=>[l(y,{modelValue:e.dirChinese,"onUpdate:modelValue":t[2]||(t[2]=t=>e.dirChinese=t),placeholder:"角色朝向"},{default:o((()=>[l(x,{value:"右"}),l(x,{value:"左"}),l(x,{value:"上"}),l(x,{value:"下"})])),_:1},8,["modelValue"])])),_:1})])),_:1}),l(w,{span:3,offset:0},{default:o((()=>[l(v,{effect:"dark",content:"切换模式"},{default:o((()=>[l(R,{modelValue:e.svgMode,"onUpdate:modelValue":t[3]||(t[3]=t=>e.svgMode=t),border:""},{default:o((()=>[i(c(e.svgMode?"SVG":"文字"),1)])),_:1},8,["modelValue"])])),_:1})])),_:1}),l(w,{span:2,offset:0},{default:o((()=>[l(v,{effect:"dark",content:"偶数偏移"},{default:o((()=>[l(R,{modelValue:e.evenOffset,"onUpdate:modelValue":t[4]||(t[4]=t=>e.evenOffset=t),border:""},{default:o((()=>[i(c(e.evenOffset?1:-1),1)])),_:1},8,["modelValue"])])),_:1})])),_:1}),e.svgMode?h("",!0):(n(),r(w,{key:0,span:6,offset:0},{default:o((()=>[l(v,{content:"格式字符",placement:"top",effect:"dark"},{default:o((()=>[l(p,{class:"emoji",modelValue:e.characters,"onUpdate:modelValue":t[5]||(t[5]=t=>e.characters=t),placeholder:""},null,8,["modelValue"])])),_:1})])),_:1}))])),_:1}),l(O,{type:"flex",justify:"center"},{default:o((()=>[e.svgMode?(n(),r(w,{key:0,span:6,class:"svg-container"},{default:o((()=>[(n(),r("svg",{ref:"svg",viewBox:e.svgViewBox.join(" "),onMousewheel:t[6]||(t[6]=(...t)=>e.handleScroll&&e.handleScroll(...t)),xmlns:"http://www.w3.org/2000/svg",style:{width:"50vw",height:"50vw","max-height":"80vh"}},[l("mask",V,[b,(n(!0),r(d,null,u(e.maskY,(t=>(n(),r("rect",{fill:"#000",x:"0",y:(t+.003*e.t)%1*2-1,width:"200%",height:"0.2px",transform:"rotate(45)"},null,8,["y","transform"])))),256))]),e.range.length?(n(!0),r(d,{key:0},u(e.range,(t=>(n(),r(d,null,[l("rect",{x:t.x,y:t.y,width:e.width,height:e.height,fill:"rgb(252, 143, 31)","fill-opacity":"0.5","stroke-width":"0",mask:"url(#stripe)",transform:`translate(${-e.width/2} ${-e.height/2})`},null,8,["x","y","width","height","transform"]),l("rect",{x:t.x,y:t.y,width:e.width,height:e.height,fill:"rgb(252, 143, 31)","fill-opacity":"0","stroke-width":"0.01",stroke:"#f62",transform:`translate(${-e.width/2} ${-e.height/2})`},null,8,["x","y","width","height","transform"])],64)))),256)):h("",!0),l("g",{transform:`rotate(${e.angle(e.dir)}) translate(-0.5 -0.5)`},[_,A],8,["transform"])],40,["viewBox"]))])),_:1})):(n(),r("div",M,c(e.rangeString),1))])),_:1})])};export default y;
